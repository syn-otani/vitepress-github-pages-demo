# 作業場検索（掲示物）

## 画面イメージ

![作業場検索（掲示物）画面](/images/workplace-notice-screenshot.png)

## 概要

作業場ごとの掲示物ファイルを管理する画面。

## 検索条件

| 項目 | 種別 | 備考 |
|------|------|------|
| 部門 | セレクトボックス | 作業場所の部門（重複除く）を表示 |

## 検索結果

| No | 表示項目 | 検索条件 | 編集 | 表示形式 | リンク | 説明 |
|----|----------|----------|------|----------|--------|------|
| 1 | 部門 | ○ | | 文字列 | PDF | |
| 2 | 作業場 | | | 文字列 | | |
| 3 | 特化物 | | ○ | ○ or 空白 | PDF | PDFファイルがある場合：○ |
| 4 | 有機溶剤 | | ○ | ○ or 空白 | PDF | PDFファイルがある場合：○ |
| 5 | 粉じん | | ○ | ○ or 空白 | PDF | PDFファイルがある場合：○ |
| 6 | 鉛 | | ○ | ○ or 空白 | PDF | PDFファイルがある場合：○ |

## PDF保存先

| 項目 | PDF保存先 |
|------|-----------|
| 特化物 | `storage/workArea/特化物掲示/特化物掲示_[WorkArea!DEPT_NAME]_[WorkArea!WORK_NAME].pdf` |
| 有機溶剤 | `storage/workArea/有機溶剤掲示/有機溶剤掲示_[WorkArea!DEPT_NAME]_[WorkArea!WORK_NAME].pdf` |
| 粉じん | `storage/workArea/粉じん掲示/粉じん掲示_[WorkArea!DEPT_NAME]_[WorkArea!WORK_NAME].pdf` |
| 鉛 | `storage/workArea/鉛掲示/鉛掲示_[WorkArea!DEPT_NAME]_[WorkArea!WORK_NAME].pdf` |

## データベース

| No | 表示項目 | テーブル名（論理） | テーブル名（物理） | カラム名（論理） | カラム名（物理） |
|----|----------|-------------------|-------------------|-----------------|-----------------|
| 1 | 部門 | [作業場所](/data/workarea) | WorkArea | 部門 | DEPT_NAME |
| 2 | 作業場 | [作業場所](/data/workarea) | WorkArea | 作業場所 | WORK_NAME |

## 編集モード仕様

### 表示

- PDFファイルがある場合：○（PDFリンク）+ アップロードボタン
- PDFファイルがない場合：アップロードボタンのみ

### アップロード

- Laravelのテンポラリ領域に元ファイル名でアップロード
- アップロード完了後：元ファイル名 + ×ボタンを表示
- ×ボタン：テンポラリファイルを削除

### 登録

- 登録ボタン：テンポラリファイルをPDF保存先へコピー
- ファイルがある場合は上書き

## 操作

- 表示/編集トグル: モード切替
- 検索ボタン: 検索実行
- クリアボタン: 検索条件クリア
- CSV出力: 検索結果をCSVダウンロード
- 登録ボタン: 編集内容を保存（編集モード時のみ）

## アップロードモーダル

![アップロードモーダル](/images/workplace-notice-upload-modal.png)

- ドラッグ＆ドロップ対応
- ファイル選択ボタン
- PDFファイルのみ受付